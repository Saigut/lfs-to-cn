<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      5.16.&nbsp;Bash-4.2
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="stylesheets/lfs-print.css" type="text/css"
    media="print" />
  </head>
  <body class="lfs" id="lfs-7.5">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 7.5
      </h4>
      <h3>
        第&nbsp;5&nbsp;章&nbsp;Constructing a Temporary System
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="ncurses.html" title="Ncurses-5.9">上一页</a>
          <p>
            Ncurses-5.9
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="bzip2.html" title="Bzip2-1.0.6">下一页</a>
          <p>
            Bzip2-1.0.6
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;Constructing a Temporary System">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="ch-tools-bash" name="ch-tools-bash"></a>5.16. Bash-4.2
      </h1>
      <div class="package" lang="zh-cn" xml:lang="zh-cn">
        <p>
          The Bash package contains the Bourne-Again SHell.
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">预计编译时间:</strong> <span class=
              "segbody">0.4 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">空间需求:</strong> <span class=
              "segbody">48 MB</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          5.16.1. Installation of Bash
        </h2>
        <p>
          First, apply the following patch to fix various bugs that have been
          addressed upstream:
        </p>
        <pre class="userinput">
<kbd class="command">patch -Np1 -i ../bash-4.2-fixes-12.patch</kbd>
</pre>
        <p>
          Prepare Bash for compilation:
        </p>
        <pre class="userinput">
<kbd class="command">./configure --prefix=/tools --without-bash-malloc</kbd>
</pre>
        <div class="variablelist">
          <p class="title">
            <strong>The meaning of the configure options:</strong>
          </p>
          <dl class="variablelist">
            <dt>
              <span class="term"><em class=
              "parameter"><code>--without-bash-malloc</code></em></span>
            </dt>
            <dd>
              <p>
                This option turns off the use of Bash's memory allocation
                (<code class="function">malloc</code>) function which is
                known to cause segmentation faults. By turning this option
                off, Bash will use the <code class="function">malloc</code>
                functions from Glibc which are more stable.
              </p>
            </dd>
          </dl>
        </div>
        <p>
          Compile the package:
        </p>
        <pre class="userinput">
<kbd class="command">make</kbd>
</pre>
        <p>
          Compilation is now complete. As discussed earlier, running the test
          suite is not mandatory for the temporary tools here in this
          chapter. To run the Bash test suite anyway, issue the following
          command:
        </p>
        <pre class="userinput">
<kbd class="command">make tests</kbd>
</pre>
        <p>
          Install the package:
        </p>
        <pre class="userinput">
<kbd class="command">make install</kbd>
</pre>
        <p>
          Make a link for the programs that use <span class=
          "command"><strong>sh</strong></span> for a shell:
        </p>
        <pre class="userinput">
<kbd class="command">ln -sv bash /tools/bin/sh</kbd>
</pre>
      </div>
      <div class="content" lang="zh-cn" xml:lang="zh-cn">
        <p>
          Details on this package are located in <a class="xref" href=
          "../chapter06/bash.html#contents-bash" title=
          "6.33.2.&nbsp;Contents of Bash">第&nbsp;6.33.2&nbsp;节 “Contents of
          Bash.”</a>
        </p>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="ncurses.html" title="Ncurses-5.9">上一页</a>
          <p>
            Ncurses-5.9
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="bzip2.html" title="Bzip2-1.0.6">下一页</a>
          <p>
            Bzip2-1.0.6
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;Constructing a Temporary System">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
