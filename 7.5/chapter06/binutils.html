<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      6.13.&nbsp;Binutils-2.24
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="stylesheets/lfs-print.css" type="text/css"
    media="print" />
  </head>
  <body class="lfs" id="lfs-7.5">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 7.5
      </h4>
      <h3>
        第&nbsp;6&nbsp;章&nbsp;安装基本系统软件
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="file.html" title="File-5.17">上一页</a>
          <p>
            File-5.17
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="gmp.html" title="GMP-5.1.3">下一页</a>
          <p>
            GMP-5.1.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "第&nbsp;6&nbsp;章&nbsp;安装基本系统软件">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="ch-system-binutils" name="ch-system-binutils"></a>6.13.
        Binutils-2.24
      </h1>
      <div class="package" lang="zh-cn" xml:lang="zh-cn">
        <p>
          Binutils 软件包包含链接器、汇编器和其他用于处理对象文件的工具。
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">预计构建时间:</strong> <span class=
              "segbody">2.0 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">磁盘空间需求:</strong> <span class=
              "segbody">365 MB</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          6.13.1. 安装 Binutils
        </h2>
        <p>
          运行一个简单的测试确认 PTY 在 chroot 环境中正常工作：
        </p>
        <pre class="userinput">
<kbd class="command">expect -c "spawn ls"</kbd>
</pre>
        <p>
          此命令应该输出以下信息：
        </p>
        <pre class="screen">
<code class="computeroutput">spawn ls</code>
</pre>
        <p>
          如果输出包含以下消息，那就意味着环境没有为 PTY 操作设置好。此问题需要在运行 Binutils 和 GCC 的测试套件之前解决：
        </p>
        <pre class="screen">
<code class="computeroutput">The system has no more ptys.
Ask your system administrator to create more.</code>
</pre>
        <p>
          防止安装一个过时的 <code class="filename">standards.info</code> 文件，因为稍后在
          Autoconf 指令中会安装一个更新的：
        </p>
        <pre class="userinput">
<kbd class="command">rm -fv etc/standards.info
sed -i.bak '/^INFO/s/standards.info //' etc/Makefile.in</kbd>
</pre>
        <p>
          Binutils 文档推荐在源代码目录外另建目录构建 Binutils：
        </p>
        <pre class="userinput">
<kbd class="command">mkdir -v ../binutils-build
cd ../binutils-build</kbd>
</pre>
        <p>
          准备编译 Binutils：
        </p>
        <pre class="userinput">
<kbd class=
"command">../binutils-2.24/configure --prefix=/usr --enable-shared</kbd>
</pre>
        <p>
          编译软件包：
        </p>
        <pre class="userinput">
<kbd class="command">make tooldir=/usr</kbd>
</pre>
        <div class="variablelist">
          <p class="title">
            <strong>&gt;make 参数的含义：</strong>
          </p>
          <dl class="variablelist">
            <dt>
              <span class="term"><em class=
              "parameter"><code>tooldir=/usr</code></em></span>
            </dt>
            <dd>
              <p>
                通常，tooldir (所有的可执行文件所在的目录) 设置为 <code class=
                "filename">$(exec_prefix)/$(target_alias)</code>。例如，x86_64
                计算机上会是 <code class=
                "filename">/usr/x86_64-unknown-linux-gnu</code>。因为这是自定义的系统，<code class="filename">/usr</code>
                中这个针对平台的目录并不需要。如果系统要进行交叉编译 (例如在 Intel 计算机上编译软件包产生用于 PowerPC
                计算机的代码)，会使用 <code class=
                "filename">$(exec_prefix)/$(target_alias)</code>。
              </p>
            </dd>
          </dl>
        </div>
        <div class="admon important">
          <img alt="[重要]" src="../images/important.png" />
          <h3>
            重要
          </h3>
          <p>
            本节中 Binutils 的测试套件是十分重要的。任何情况下都不要跳过。
          </p>
        </div>
        <p>
          测试结果：
        </p>
        <pre class="userinput">
<kbd class="command">make check</kbd>
</pre>
        <p>
          安装软件包：
        </p>
        <pre class="userinput">
<kbd class="command">make tooldir=/usr install</kbd>
</pre>
      </div>
      <div class="content" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          <a id="contents-binutils" name="contents-binutils"></a>6.13.2.
          Binutils 的内容
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">安装的程序:</strong> <span class=
              "segbody">addr2line, ar, as, c++filt, elfedit, gprof, ld,
              ld.bfd, nm, objcopy, objdump, ranlib, readelf, size, strings 和
              strip</span>
            </div>
            <div class="seg">
              <strong class="segtitle">安装的库:</strong> <span class=
              "segbody">libbfd.{a,so} 和 libopcodes.{a,so}</span>
            </div>
            <div class="seg">
              <strong class="segtitle">安装的目录:</strong> <span class=
              "segbody">/usr/lib/ldscripts</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            简述
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="addr2line" name="addr2line"></a><span class=
                    "term"><span class=
                    "command"><strong>addr2line</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    将程序地址翻译成文件名和行号；给定地址和可执行文件名称，它使用其中的调试信息判断与此地址有关联的源文件和行号
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ar" name="ar"></a><span class="term"><span class=
                    "command"><strong>ar</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    创建、修改和提取归档
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="as" name="as"></a><span class="term"><span class=
                    "command"><strong>as</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    一个汇编器，将 <span class="command"><strong>gcc</strong></span>
                    的输出汇编为对象文件
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="c-filt" name="c-filt"></a><span class=
                    "term"><span class=
                    "command"><strong>c++filt</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    被链接器用于修复 C++ 和 Java 符号，防止重载的函数相互冲突
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="elfedit" name="elfedit"></a><span class=
                    "term"><span class=
                    "command"><strong>elfedit</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    更新 ELF 文件的 ELF 头
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="gprof" name="gprof"></a><span class=
                    "term"><span class=
                    "command"><strong>gprof</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    显示分析数据的调用图表
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ld" name="ld"></a><span class="term"><span class=
                    "command"><strong>ld</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    一个链接器，将几个对象和归档文件组合成一个文件，重新定位它们的数据并且捆绑符号索引
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ld.bfd" name="ld.bfd"></a><span class=
                    "term"><span class=
                    "command"><strong>ld.bfd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    到 <span class="command"><strong>ld</strong></span> 的硬链接
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="nm" name="nm"></a><span class="term"><span class=
                    "command"><strong>nm</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    列出给定对象文件中出现的符号
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="objcopy" name="objcopy"></a><span class=
                    "term"><span class=
                    "command"><strong>objcopy</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    将一种对象文件翻译成另一种
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="objdump" name="objdump"></a><span class=
                    "term"><span class=
                    "command"><strong>objdump</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    显示有关给定对象文件的信息，包含指定显示信息的选项；显示的信息对编译工具开发者很有用
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ranlib" name="ranlib"></a><span class=
                    "term"><span class=
                    "command"><strong>ranlib</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    创建一个归档的内容索引并存储在归档内；索引列出其成员中可重定位的对象文件定义的所有符号
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="readelf" name="readelf"></a><span class=
                    "term"><span class=
                    "command"><strong>readelf</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    显示有关 ELF 二进制文件的信息
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="size" name="size"></a><span class=
                    "term"><span class=
                    "command"><strong>size</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    列出给定对象文件每个部分的尺寸和总尺寸
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="strings" name="strings"></a><span class=
                    "term"><span class=
                    "command"><strong>strings</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    对每个给定的文件输出不短于指定长度 (默认为 4)
                    的所有可打印字符序列；对于对象文件默认只打印初始化和加载部分的字符串，否则扫描整个文件
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="strip" name="strip"></a><span class=
                    "term"><span class=
                    "command"><strong>strip</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    移除对象文件中的符号
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libbfd" name="libbfd"></a><span class=
                    "term"><code class="filename">libbfd</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    二进制文件描述器库
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="libopcodes" name="libopcodes"></a><span class=
                    "term"><code class="filename">libopcodes</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    一个库，用于处理 opcodes——处理器指令的 <span class=
                    "quote">“<span class="quote">可读文本</span>”</span> 版本；用于构建
                    <span class="command"><strong>objdump</strong></span>
                    这样的工具
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="file.html" title="File-5.17">上一页</a>
          <p>
            File-5.17
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="gmp.html" title="GMP-5.1.3">下一页</a>
          <p>
            GMP-5.1.3
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "第&nbsp;6&nbsp;章&nbsp;安装基本系统软件">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
