<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      6.5.&nbsp;创建目录
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="stylesheets/lfs-print.css" type="text/css"
    media="print" />
  </head>
  <body class="lfs" id="lfs-7.5">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 7.5
      </h4>
      <h3>
        第&nbsp;6&nbsp;章&nbsp;安装基本系统软件
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="chroot.html" title="进入 Chroot 环境">上一页</a>
          <p>
            进入 Chroot 环境
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="createfiles.html" title="创建必要的文件和链接">下一页</a>
          <p>
            创建必要的文件和链接
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "第&nbsp;6&nbsp;章&nbsp;安装基本系统软件">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="ch-system-creatingdirs" name="ch-system-creatingdirs"></a>6.5.
        创建目录
      </h1>
      <p>
        现在我们将创建 LFS 文件系统中的某些结构。执行以下命令创建一个标准目录树：
      </p>
      <pre class="userinput">
<kbd class=
"command">mkdir -pv /{bin,boot,etc/{opt,sysconfig},home,lib,mnt,opt}
mkdir -pv /{media/{floppy,cdrom},sbin,srv,var}
install -dv -m 0750 /root
install -dv -m 1777 /tmp /var/tmp
mkdir -pv /usr/{,local/}{bin,include,lib,sbin,src}
mkdir -pv /usr/{,local/}share/{color,dict,doc,info,locale,man}
mkdir -v  /usr/{,local/}share/{misc,terminfo,zoneinfo}
mkdir -v  /usr/libexec
mkdir -pv /usr/{,local/}share/man/man{1..8}

case $(uname -m) in
 x86_64) ln -sv lib /lib64     &amp;&amp; 
         ln -sv lib /usr/lib64 &amp;&amp; 
         ln -sv lib /usr/local/lib64 ;;
esac

mkdir -v /var/{log,mail,spool}
ln -sv /run /var/run
ln -sv /run/lock /var/lock
mkdir -pv /var/{opt,cache,lib/{color,misc,locate},local}</kbd>
</pre>
      <p>
        默认地，目录创建时的权限模式为 755，但是并不是所有的目录都应该如此。在以上目录中，我们进行了两项改动——一次是对于
        <code class="systemitem">root</code> 用户的主目录，另一此是对用于临时文件的目录。
      </p>
      <p>
        第一次模式修改确保并不是所有人都能进入 <code class="filename">/root</code>
        目录——和一个普通用户保护其主目录的方式相同。第二此模式修改确保所有人都可以写入 <code class=
        "filename">/tmp</code> 和 <code class="filename">/var/tmp</code>
        两个目录，但是无法从中移除其他用户的文件。后者被所谓<span class="quote">“<span class=
        "quote">粘性位</span>”</span>，1777 位掩码中的最高位实现。
      </p>
      <div class="sect2" lang="zh-cn" xml:lang="zh-cn">
        <h2 class="sect2">
          6.5.1. FHS 兼容注记
        </h2>
        <p>
          目录树基于文件系统层级标准 (FHS) (位于 <a class="ulink" href=
          "http://www.pathname.com/fhs/">http://www.pathname.com/fhs/</a>)。在
          FHS 之外我们还给 <code class="filename">man</code>、<code class=
          "filename">doc</code> 和 <code class="filename">info</code>
          目录创建了兼容性符号链接，因为很多软件包依然试图将文档安装到 <code class=
          "filename">/usr/&lt;dir&gt;</code> 或 <code class=
          "filename">/usr/local/&lt;dir&gt;</code> 中而不是 <code class=
          "filename">/usr/share/&lt;dir&gt;</code> 或 <code class=
          "filename">/usr/local/share/&lt;dir&gt;</code> 中。FHS 还要求
          <code class="filename">/usr/local/games</code> 和 <code class=
          "filename">/usr/share/games</code> 存在。FHS 对于 <code class=
          "filename">/usr/local/share</code>
          子目录的要求并不严格，所以我们之创建了需要的目录。不过，如果要严格遵守 FHS 标准，亦可创建之。
        </p>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="chroot.html" title="进入 Chroot 环境">上一页</a>
          <p>
            进入 Chroot 环境
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="createfiles.html" title="创建必要的文件和链接">下一页</a>
          <p>
            创建必要的文件和链接
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter06.html" title=
          "第&nbsp;6&nbsp;章&nbsp;安装基本系统软件">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
