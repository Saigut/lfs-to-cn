<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      5.36.&nbsp;改变所有权
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
    <link rel="stylesheet" href="stylesheets/lfs-print.css" type="text/css"
    media="print" />
  </head>
  <body class="lfs" id="lfs-7.5">
    <div class="navheader">
      <h4>
        Linux From Scratch - 版本 7.5
      </h4>
      <h3>
        第&nbsp;5&nbsp;章&nbsp;构建一个临时系统
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="stripping.html" title="清理">上一页</a>
          <p>
            清理
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../part3.html" title="构建LFS系统">下一页</a>
          <p>
            构建LFS系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;构建一个临时系统">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="zh-cn" xml:lang="zh-cn">
      <h1 class="sect1">
        <a id="ch-tools-changingowner" name=
        "ch-tools-changingowner"></a>5.36. 改变所有权
      </h1>
      <div class="admon note">
        <img alt="[注意]" src="../images/note.png" />
        <h3>
          注意
        </h3>
        <p>
          本书中余下部分的命令必须作为 <code class="systemitem">root</code> 用户登录，不再是
          <code class="systemitem">lfs</code> 用户。同样，再次检查 <code class=
          "envar">$LFS</code> 在 <code class="systemitem">root</code> 的环境中设置好。
        </p>
      </div>
      <p>
        现在，<code class="filename">$LFS/tools</code> 目录属于 <code class=
        "systemitem">lfs</code> 用户，它只存在于宿主系统上。如果 <code class=
        "filename">$LFS/tools</code> 目录就这样，这些文件就会属于一个没有对应账户的用户
        ID。这很危险，因为以后创建的用户账户可能会拿到同样的用户 ID 并拥有 <code class=
        "filename">$LFS/tools</code> 目录和其中的所有文件，使得这些文件暴露在恶意修改风险中。
      </p>
      <p>
        要避开这个问题，你需要在创建 <code class="filename">/etc/passwd</code> 文件时添加
        <code class="systemitem">lfs</code> 用户到新的 LFS 系统中，并将其对应到与宿主系统上相同的用户和组
        ID 上。更好的办法是改变 <code class="filename">$LFS/tools</code> 目录的所有权到
        <code class="systemitem">root</code> 用户，运行以下命令：
      </p>
      <pre class="userinput">
<kbd class="command">chown -R root:root $LFS/tools</kbd>
</pre>
      <p>
        虽然 <code class="filename">$LFS/tools</code> 目录一旦 LFS
        系统完成就可以删除，也可以留着用来构建额外的<span class="emphasis"><em>相同版本的</em></span>
        LFS 系统。是否要备份 <code class="filename">$LFS/tools</code> 是个人偏好。
      </p>
      <div class="admon caution">
        <img alt="[小心]" src="../images/caution.png" />
        <h3>
          小心
        </h3>
        <p>
          如果你想要保留临时工具用于构建未来的 LFS 系统，<span class=
          "strong"><strong>现在</strong></span>就该备份了。此后第六章中的命令会改变现在搞好的工具，使它们对以后的构建没有用处。
        </p>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="stripping.html" title="清理">上一页</a>
          <p>
            清理
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="../part3.html" title="构建LFS系统">下一页</a>
          <p>
            构建LFS系统
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "第&nbsp;5&nbsp;章&nbsp;构建一个临时系统">上一级</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - 版本 7.5">起始页</a>
        </li>
      </ul>
    </div>
  </body>
</html>
